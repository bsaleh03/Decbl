(this["webpackJsonpreact-flask-app"]=this["webpackJsonpreact-flask-app"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),r=n.n(o),c=n(28),s=n.n(c),i=(n(76),n.p,n(7)),l=(n(77),n(31),n(22)),u=n(37),j=n(15),d=n(16),h=n(21),p=n(20),b=n(114),m=n(113),f=n(112),O=n(65),x=n(104),g=n(13),v=n.n(g),y="https://cors-anywhere.herokuapp.com/https://core-outcome-257723.uc.r.appspot.com/api/",w=new(function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"login",value:function(e,t){return v.a.post(y+"login",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,n){return v.a.post(y+"signup",{username:e,email:t,password:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}());function k(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:(console.log("failure"),{})}var D=n.p+"static/media/logo2.96a6db39.svg",S=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={externalData:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://core-outcome-257723.uc.r.appspot.com/api/getuName",{method:"GET",headers:k()}).then((function(e){return e.json()})).then((function(t){e.setState({externalData:t.uName})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(a.jsxs)(b.a,{bg:"light",variant:"light",expand:"lg",children:[Object(a.jsx)(b.a.Brand,{href:w.getCurrentUser()?"/feed":"/popular",children:Object(a.jsx)("img",{src:D,style:{height:"30px",width:"146px",margin:"0"},className:"d-inline-block align-top",alt:"DECBL"})}),Object(a.jsx)(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(b.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(m.a,{className:"mr-auto",children:[w.getCurrentUser()?Object(a.jsx)(m.a.Link,{href:"/signup",onClick:function(){return w.logout()},children:"Log out"}):Object(a.jsx)(m.a.Link,{href:"/signup",children:"Sign up"}),w.getCurrentUser()?Object(a.jsx)(m.a.Link,{href:"/profile/"+this.state.externalData,children:"My Profile"}):Object(a.jsx)("a",{}),w.getCurrentUser()?Object(a.jsx)(m.a.Link,{href:" /feed",children:"Feed"}):Object(a.jsx)("a",{}),Object(a.jsx)(m.a.Link,{href:"/popular",children:"Popular posts"})]}),Object(a.jsxs)(f.a,{inline:!0,children:[Object(a.jsx)(O.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(a.jsx)(x.a,{onClick:function(){return alert("User search is coming soon\u2122")},variant:"outline-info",children:"Search"})]})]})]})}}]),n}(r.a.Component);var C=function(){var e=Object(i.g)(),t=Object(o.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(o.useState)({submitting:!1,status:null}),u=Object(l.a)(s,2),j=u[0],d=u[1],h=function(e,t,n,a){d({submitting:!1,status:{ok:e,msg:t}}),e&&n.reset()};return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(S,{}),Object(a.jsxs)("body",{children:[r?Object(a.jsxs)(f.a,{onSubmit:function(e){e.preventDefault();var t=e.target;d({submitting:!0}),v()({method:"post",url:"https://core-outcome-257723.uc.r.appspot.com/api/signup",data:new FormData(t)}).then((function(e){h(!0,"Thanks! Please log in",t)})).catch((function(e){h(!1,e.response.data.error,t),console.log(e)}))},style:{width:"30rem",margin:"auto"},children:[Object(a.jsxs)(f.a.Group,{controlId:"formGroupName",children:[Object(a.jsx)(f.a.Label,{children:"Name"}),Object(a.jsx)(f.a.Control,{type:"name",placeholder:"Enter name",name:"name"})]}),Object(a.jsxs)(f.a.Group,{controlId:"formGroupUserName",children:[Object(a.jsx)(f.a.Label,{children:"User Name"}),Object(a.jsx)(f.a.Control,{type:"username",placeholder:"Enter username",name:"username"})]}),Object(a.jsxs)(f.a.Group,{controlId:"formGroupPassword",children:[Object(a.jsx)(f.a.Label,{children:"Password"}),Object(a.jsx)(f.a.Control,{type:"password",placeholder:"Enter password",name:"password"})]}),Object(a.jsxs)(f.a.Group,{controlId:"formGroupPasswordConfirm",children:[Object(a.jsx)(f.a.Label,{children:"Confirm Password"}),Object(a.jsx)(f.a.Control,{type:"password",placeholder:"Re-enter password",name:"password_confirm"})]}),Object(a.jsxs)(f.a.Group,{controlId:"formGroupEmail",children:[Object(a.jsx)(f.a.Label,{children:"E-mail"}),Object(a.jsx)(f.a.Control,{type:"email",placeholder:"Enter email",name:"email"})]}),Object(a.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"}),j.status&&Object(a.jsx)("p",{style:{width:"30rem",margin:"auto"},className:j.status.ok?"":"errorMsg",children:j.status.msg})]}):Object(a.jsxs)(f.a,{onSubmit:function(t){t.preventDefault();var n=t.target;d({submitting:!0}),v()({method:"post",url:"https://core-outcome-257723.uc.r.appspot.com/api/login",data:new FormData(n)}).then((function(t){t.data.accessToken&&(localStorage.setItem("user",JSON.stringify(t.data)),console.log("stored lol")),h(!0,"Thanks!",n),e.push("/feed")})).catch((function(e){h(!1,e.response.data.error,n)}))},style:{width:"30rem",margin:"auto"},children:[Object(a.jsxs)(f.a.Group,{controlId:"formGroupUserName",children:[Object(a.jsx)(f.a.Label,{children:"User Name"}),Object(a.jsx)(f.a.Control,{type:"username",placeholder:"Enter username",name:"username"})]}),Object(a.jsxs)(f.a.Group,{controlId:"formGroupPassword",children:[Object(a.jsx)(f.a.Label,{children:"Password"}),Object(a.jsx)(f.a.Control,{type:"password",placeholder:"Enter password",name:"password"})]}),Object(a.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"}),j.status&&Object(a.jsx)("p",{className:j.status.ok?"":"errorMsg",children:j.status.msg})]}),r?Object(a.jsxs)("div",{style:{width:"30rem",margin:"auto"},children:[Object(a.jsx)("a",{children:"Already on Decbl? "})," ",Object(a.jsx)("a",{style:{color:"blue"},onClick:function(){return c(!r)},children:" Sign in."})]}):Object(a.jsxs)("div",{style:{width:"30rem",margin:"auto"},children:[Object(a.jsx)("a",{children:"Don't have an account yet?"})," ",Object(a.jsx)("a",{style:{color:"blue"},onClick:function(){return c(!r)},children:" Create one now!"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("a",{style:{color:"blue"},onClick:function(){return alert("That sounds like a you problem")},children:"Forgot your password?"})]})]})]})},N=n(54),L=n.n(N),P=n(67),T=n(68),G=n(69),U=n.n(G),B=n(105),I=n(106),A=new U.a({bitrate:96});function E(){return(E=Object(T.a)(L.a.mark((function e(t,n){var a,o,r,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FormData).append("audio",t),a.append("userID",1),o=Object(P.a)(a);try{for(o.s();!(r=o.n()).done;)c=r.value,console.log(c)}catch(n){o.e(n)}finally{o.f()}v.a.post("https://core-outcome-257723.uc.r.appspot.com/api/createpost",a,{headers:k()}).then((function(e){console.log(e),window.location.reload()})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).start=function(){a.state.isBlocked?(console.log("Permission Denied"),alert("permission Denied")):A.start().then((function(){a.setState({isRecording:!0})})).catch((function(e){return console.error(e)}))},a.stop=function(){A.stop().getMp3().then((function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]),o=URL.createObjectURL(n),r=n;a.setState({blobURL:o,isRecording:!1,OGBlob:r})})).catch((function(e){return console.log(e)}))},a.state={isRecording:!1,blobURL:"",isBlocked:!1,OGBlob:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({audio:!0},(function(){console.log("Permission Granted"),e.setState({isBlocked:!1})}),(function(){console.log("Permission Denied"),alert("permission Denied"),e.setState({isBlocked:!0})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(u.a,{style:{width:"30rem",margin:"auto"},children:Object(a.jsxs)(u.a.Body,{children:[Object(a.jsx)(u.a.Subtitle,{className:"mb-2 text-muted",children:"Say Something"}),Object(a.jsx)(u.a.Text,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("audio",{src:this.state.blobURL,controls:"controls"}),this.state.isRecording?Object(a.jsx)(I.a,{onClick:this.stop}):Object(a.jsx)(B.a,{onClick:this.start}),Object(a.jsx)("button",{onClick:function(){return function(e,t){return E.apply(this,arguments)}(e.state.OGBlob,1)},children:" SHIP "})]})})]})})}}]),n}(r.a.Component),R=n.p+"static/media/loading-arrow.41c7f16c.svg",M=(n(64),n(107)),J=n(108),H=n(109),Y=n(110),z=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=atob(e),o=[],r=0;r<a.length;r+=n){for(var c=a.slice(r,r+n),s=new Array(c.length),i=0;i<c.length;i++)s[i]=c.charCodeAt(i);var l=new Uint8Array(s);o.push(l)}var u=new Blob(o,{type:t});return u},_=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).like=function(e){var t=new FormData;t.append("idPosts",e),fetch("https://core-outcome-257723.uc.r.appspot.com/api/like",{method:"POST",headers:k(),body:t}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){console.log(e)})),window.location.reload()},a.delete=function(e){alert("Deletion is still buggy, may not work.");var t=new FormData;t.append("idPosts",e),fetch("https://core-outcome-257723.uc.r.appspot.com/api/delete",{method:"POST",headers:k(),body:t}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}))},a.state={userName:null,externalData:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://core-outcome-257723.uc.r.appspot.com/api/getuName",{method:"GET",headers:k()}).then((function(e){return e.json()})).then((function(t){e.setState({userName:t.uName})})).catch((function(e){console.log(e)})),v.a.get("https://core-outcome-257723.uc.r.appspot.com/api/posts",{headers:k()}).then((function(t){console.log(t.data),e.setState({externalData:t.data.users})})).catch((function(e){console.log(e.response)}))}},{key:"render",value:function(){var e=this;return null===this.state.externalData||void 0===this.state.externalData?(console.log(this.state.externalData),Object(a.jsx)("img",{style:{width:"30rem",margin:"auto"},src:R,className:"loading-icon",alt:"logo"})):Object(a.jsx)("div",{children:this.state.externalData.map((function(t){return console.log(e.state.userName),Object(a.jsxs)(u.a,{style:{width:"30rem",margin:"auto"},body:!0,children:[Object(a.jsxs)("a",{href:"/profile/"+t[2],children:[Object(a.jsxs)(u.a.Title,{style:{color:"black"},children:[t[1],t[6]?Object(a.jsx)(M.a,{}):Object(a.jsx)("a",{})]}),Object(a.jsxs)(u.a.Subtitle,{className:"mb-2 text-muted",children:["@",t[2]]})]}),Object(a.jsx)("audio",{src:URL.createObjectURL(z(t[3])),controls:"controls"}),t[10]?Object(a.jsx)(J.a,{onClick:function(){return e.like(t[5])}}):Object(a.jsx)(H.a,{onClick:function(){e.like(t[5])}}),t[9][0],e.state.userName==t[2]?Object(a.jsx)(Y.a,{onClick:function(){e.delete(t[5])}}):Object(a.jsx)("a",{})]})}))})}}]),n}(r.a.Component);var q=function(){var e=Object(o.useState)(0),t=Object(l.a)(e,2);return t[0],t[1],Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(S,{}),Object(a.jsxs)("body",{children:[Object(a.jsx)(F,{}),Object(a.jsx)(_,{})]})]})},K=n(111),Q=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=atob(e),o=[],r=0;r<a.length;r+=n){for(var c=a.slice(r,r+n),s=new Array(c.length),i=0;i<c.length;i++)s[i]=c.charCodeAt(i);var l=new Uint8Array(s);o.push(l)}var u=new Blob(o,{type:t});return u},V=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).follow=function(e){var t=new FormData;t.append("idUsers",e),fetch("https://core-outcome-257723.uc.r.appspot.com/api/follow",{method:"POST",headers:k(),body:t}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(e){console.log(e),window.location.reload()})).catch((function(e){alert(e)}))},a.updateProfile=function(){var e=new FormData;e.append("name",a.state.name),e.append("biography",a.state.bio),fetch("https://core-outcome-257723.uc.r.appspot.com/api/changeprofile",{method:"POST",headers:k(),body:e}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(e){console.log(e),window.location.reload()})).catch((function(e){alert(e)}))},a.like=function(e){var t=new FormData;t.append("idPosts",e),fetch("https://core-outcome-257723.uc.r.appspot.com/api/like",{method:"POST",headers:k(),body:t}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(e){console.log(e),window.location.reload()})).catch((function(e){alert(e)}))},a.state={externalData:null,pfData:null,modalActive:!1,name:"",bio:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.a.get("https://core-outcome-257723.uc.r.appspot.com/api/profile/"+this.props.name,{method:"GET",headers:k()}).then((function(t){console.log(t),e.setState({pfData:t.data.userInfo,name:t.data.userInfo[0],bio:t.data.userInfo[2]})})).catch((function(e){console.log(e)})),v.a.get("https://core-outcome-257723.uc.r.appspot.com/api/posts/"+this.props.name,{method:"GET",headers:k()}).then((function(t){console.log(t.data.users),e.setState({externalData:t.data.users})})).catch((function(e){console.log(e.response)}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{}),null===this.state.pfData||void 0===this.state.pfData?Object(a.jsx)("img",{style:{width:"30rem",margin:"auto"},src:R,className:"loading-icon",alt:"logo"}):Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("body",{children:Object(a.jsxs)(u.a,{body:!0,style:{width:"30rem",margin:"auto"},children:[Object(a.jsxs)(u.a.Title,{style:{color:"black"},children:[this.state.pfData[0],this.state.pfData[3]?Object(a.jsx)(M.a,{}):Object(a.jsx)("a",{})]}),Object(a.jsxs)(u.a.Subtitle,{className:"mb-2 text-muted",children:["@",this.props.name]}),Object(a.jsxs)(u.a.Body,{children:[Object(a.jsx)(u.a.Text,{children:Object(a.jsx)("div",{children:this.state.pfData[2]})}),Object(a.jsx)("b",{children:this.state.pfData[7]}),"Following\xa0\xa0",Object(a.jsx)("b",{children:this.state.pfData[6]}),"Followers",this.state.pfData[5]?Object(a.jsxs)("div",{children:[Object(a.jsx)(x.a,{onClick:function(){return e.setState({modalActive:!0})},style:{float:"right"},children:"Edit profile"}),Object(a.jsx)(K.a,{show:this.state.modalActive,onHide:function(){return e.setState({modalActive:!1})},backdrop:"static",keyboard:!1,children:Object(a.jsxs)(f.a,{onSubmit:function(){return e.updateProfile},children:[Object(a.jsx)(K.a.Header,{closeButton:!0,children:Object(a.jsx)(K.a.Title,{children:"Edit Profile"})}),Object(a.jsxs)(K.a.Body,{children:[Object(a.jsxs)(f.a.Group,{controlId:"formGroupName",children:[Object(a.jsx)(f.a.Label,{children:"Name"}),Object(a.jsx)(f.a.Control,{type:"text",name:"name",placeholder:"Your Name",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}})]}),Object(a.jsxs)(f.a.Group,{controlId:"formGroupBio",children:[Object(a.jsx)(f.a.Label,{children:"Bio"}),Object(a.jsx)(f.a.Control,{as:"textarea",rows:2,name:"biography",placeholder:"Your Biography",value:this.state.bio,onChange:function(t){e.setState({bio:t.target.value})}})]})]}),Object(a.jsxs)(K.a.Footer,{children:[Object(a.jsx)(x.a,{variant:"secondary",onClick:function(){return e.setState({modalActive:!1})},children:"Close"}),Object(a.jsx)(x.a,{variant:"primary",onClick:function(){return e.updateProfile()},children:"Submit"})]})]})})]}):Object(a.jsx)(x.a,{onClick:function(){return e.follow(e.state.pfData[4])},style:{float:"right"},children:this.state.pfData[8]?Object(a.jsx)("a",{children:"Follow"}):Object(a.jsx)("a",{children:"Unfolllow"})})]})]})})}),null===this.state.externalData||void 0===this.state.externalData?Object(a.jsx)("img",{style:{width:"30rem",margin:"auto"},src:R,className:"loading-icon",alt:"logo"}):this.state.externalData.map((function(t){return Object(a.jsxs)(u.a,{body:!0,style:{width:"30rem",margin:"auto"},children:[Object(a.jsxs)("a",{href:"/profile/"+t[2],children:[Object(a.jsxs)(u.a.Title,{style:{color:"black"},children:[t[1],t[6]?Object(a.jsx)(M.a,{}):Object(a.jsx)("a",{})]}),Object(a.jsxs)(u.a.Subtitle,{className:"mb-2 text-muted",children:["@",t[2]]})]}),Object(a.jsx)("audio",{src:URL.createObjectURL(Q(t[3])),controls:"controls"}),t[8]?Object(a.jsx)(J.a,{onClick:function(){return e.like(t[5])}}):Object(a.jsx)(H.a,{onClick:function(){e.like(t[5])}}),t[7][0]]})}))]})}}]),n}(r.a.Component),W=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=atob(e),o=[],r=0;r<a.length;r+=n){for(var c=a.slice(r,r+n),s=new Array(c.length),i=0;i<c.length;i++)s[i]=c.charCodeAt(i);var l=new Uint8Array(s);o.push(l)}var u=new Blob(o,{type:t});return u},X=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).like=function(e){var t=new FormData;t.append("idPosts",e),fetch("https://core-outcome-257723.uc.r.appspot.com/api/like",{method:"POST",headers:k(),body:t}).then((function(e){return e.json()})).then((function(e){window.location.reload()})).catch((function(e){console.log(e)}))},a.state={externalData:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://core-outcome-257723.uc.r.appspot.com/api/popularposts",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){e.setState({externalData:t.users})}))}},{key:"render",value:function(){var e=this;return null===this.state.externalData||void 0===this.state.externalData?Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(S,{}),Object(a.jsx)("img",{style:{width:"30rem",margin:"auto"},src:R,className:"loading-icon",alt:"logo"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{}),this.state.externalData.map((function(t){return console.log(t),Object(a.jsxs)(u.a,{style:{width:"30rem",margin:"auto"},body:!0,children:[Object(a.jsxs)("a",{href:"/profile/"+t[2],children:[Object(a.jsxs)(u.a.Title,{style:{color:"black"},children:[t[1],t[6]?Object(a.jsx)(M.a,{}):Object(a.jsx)("a",{})]}),Object(a.jsxs)(u.a.Subtitle,{className:"mb-2 text-muted",children:["@",t[2]]})]}),Object(a.jsx)("audio",{src:URL.createObjectURL(W(t[3])),controls:"controls"}),t[8]?Object(a.jsx)(J.a,{onClick:function(){return e.like(t[5])}}):Object(a.jsx)(H.a,{onClick:function(){e.like(t[5])}}),t[7][0]]})}))]})}}]),n}(r.a.Component);function Z(){var e=Object(i.h)().id;return Object(a.jsx)(V,{name:e})}var $=function(){return Object(a.jsxs)("main",{children:[Object(a.jsxs)(i.d,{children:[Object(a.jsx)(i.b,{path:"/",exact:!0,children:Object(a.jsx)(i.a,{to:"/popular"})}),Object(a.jsx)(i.b,{path:"/signup",component:C}),Object(a.jsx)(i.b,{path:"/feed",component:q}),Object(a.jsx)(i.b,{path:"/popular",component:X})]}),Object(a.jsx)(i.d,{children:Object(a.jsx)(i.b,{path:"/profile/:id",children:Object(a.jsx)(Z,{})})})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))},te=n(40);s.a.render(Object(a.jsx)(te.a,{children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)($,{})})}),document.getElementById("root")),ee()},64:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.f1ab35ea.chunk.js.map